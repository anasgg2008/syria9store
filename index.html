<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sales App - Main</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: white;
    color: black;
    margin: 20px;
    padding: 0;
  }
  header {
    display: flex;
    justify-content: flex-end;
  }
  #menuBtn {
    cursor: pointer;
    font-size: 24px;
    user-select: none;
  }
  #menu {
    display: none;
    position: absolute;
    top: 40px;
    right: 20px;
    background: #eee;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 180px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    z-index: 10;
  }
  #menu a {
    display: block;
    padding: 10px 15px;
    color: black;
    text-decoration: none;
  }
  #menu a:hover {
    background-color: #ddd;
  }
  label, select, input {
    display: block;
    margin: 10px 0;
    font-size: 18px;
    width: 100%;
    max-width: 300px;
  }
  button {
    margin-top: 20px;
    font-size: 18px;
    padding: 10px 20px;
    cursor: pointer;
  }
</style>
</head>
<body>
<header>
  <div id="menuBtn">â‹®</div>
  <div id="menu">
    <a href="sales.html">Edit Sales</a>
    <a href="prices.html">Edit Prices</a>
    <a href="#" id="toggleTheme">Toggle Dark Mode</a>
  </div>
</header>

<h1>Choose Product</h1>

<label for="productSelect">Product:</label>
<select id="productSelect"></select>

<label for="quantityInput">Quantity:</label>
<input type="number" id="quantityInput" min="1" value="1" />

<label>Total Price:</label>
<div id="totalPrice">0</div>

<label>Profit:</label>
<div id="profit">0</div>

<button id="saveBtn">Save Sale</button>

<script>
// Data: load prices from localStorage or set default products
let products = JSON.parse(localStorage.getItem('products')) || {
  "Cola": {price: 7500, cost: 5000},
  "Water": {price: 3000, cost: 1500},
  "Chips": {price: 10999, cost: 7000}
};

const productSelect = document.getElementById('productSelect');
const quantityInput = document.getElementById('quantityInput');
const totalPriceDiv = document.getElementById('totalPrice');
const profitDiv = document.getElementById('profit');
const saveBtn = document.getElementById('saveBtn');

function populateProducts() {
  productSelect.innerHTML = '';
  for(let name in products){
    let opt = document.createElement('option');
    opt.value = name;
    opt.textContent = name;
    productSelect.appendChild(opt);
  }
}

function updateTotals(){
  const product = productSelect.value;
  const quantity = Number(quantityInput.value);
  if(products[product]){
    const totalPrice = products[product].price * quantity;
    const profit = (products[product].price - products[product].cost) * quantity;
    totalPriceDiv.textContent = totalPrice.toLocaleString();
    profitDiv.textContent = profit.toLocaleString();
  } else {
    totalPriceDiv.textContent = '0';
    profitDiv.textContent = '0';
  }
}

function saveSale(){
  const product = productSelect.value;
  const quantity = Number(quantityInput.value);
  if(quantity <= 0) {
    alert("Quantity must be positive");
    return;
  }
  const today = new Date().toISOString().slice(0,10);
  const salesData = JSON.parse(localStorage.getItem('sales')) || {};
  if(!salesData[today]){
    salesData[today] = [];
  }
  salesData[today].push({
    product,
    quantity,
    price: products[product].price,
    cost: products[product].cost,
    timestamp: new Date().toISOString()
  });
  localStorage.setItem('sales', JSON.stringify(salesData));
  alert("Sale saved!");
  quantityInput.value = 1;
  updateTotals();
}

// Menu toggle logic
const menuBtn = document.getElementById('menuBtn');
const menu = document.getElementById('menu');
menuBtn.addEventListener('click', () => {
  if(menu.style.display === 'block'){
    menu.style.display = 'none';
  } else {
    menu.style.display = 'block';
  }
});

// Dark mode toggle
const toggleTheme = document.getElementById('toggleTheme');
toggleTheme.addEventListener('click', () => {
  if(document.body.style.backgroundColor === 'black'){
    document.body.style.backgroundColor = 'white';
    document.body.style.color = 'black';
  } else {
    document.body.style.backgroundColor = 'black';
    document.body.style.color = 'white';
  }
  menu.style.display = 'none';
});

productSelect.addEventListener('change', updateTotals);
quantityInput.addEventListener('input', updateTotals);
saveBtn.addEventListener('click', saveSale);

populateProducts();
updateTotals();
</script>
</body>
</html>
